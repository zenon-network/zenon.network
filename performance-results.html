<!DOCTYPE html>
<html>
<head>
    <title>Zenon Network - Performance Test Results</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #1a1a1a; color: #fff; }
        h1 { color: #6FF34D; }
        .section { margin: 20px 0; padding: 20px; background: #2a2a2a; border-radius: 8px; }
        .metric { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #444; }
        .good { color: #6FF34D; font-weight: bold; }
        .bad { color: #ff4444; font-weight: bold; }
        .warning { color: #ffaa44; }
        button { background: #6FF34D; color: #000; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>Performance Optimization Results</h1>
    
    <div class="section">
        <h2>Image Optimization Status</h2>
        <div id="imageResults"></div>
    </div>
    
    <div class="section">
        <h2>WebP Support & Implementation</h2>
        <div id="webpResults"></div>
    </div>
    
    <div class="section">
        <h2>Lazy Loading Status</h2>
        <div id="lazyResults"></div>
    </div>
    
    <div class="section">
        <h2>Network Performance</h2>
        <div id="networkResults"></div>
    </div>
    
    <button onclick="runTests()">Run Performance Tests</button>
    
    <script>
        async function runTests() {
            // Test WebP support
            const webpSupported = document.documentElement.classList.contains('webp');
            const webpResults = document.getElementById('webpResults');
            webpResults.innerHTML = `
                <div class="metric">
                    <span>Browser WebP Support:</span>
                    <span class="${webpSupported ? 'good' : 'bad'}">${webpSupported ? 'YES' : 'NO'}</span>
                </div>
            `;
            
            // Check WebP files
            const webpFiles = ['ball', 'swirl', 'ellipse', 'star-background', 'network', 'funding', 'wallet-bg', 'code-bg'];
            let webpCount = 0;
            
            for (const file of webpFiles) {
                try {
                    const response = await fetch(`img/${file}.webp`, { method: 'HEAD' });
                    if (response.ok) {
                        webpCount++;
                        const size = response.headers.get('content-length');
                        webpResults.innerHTML += `
                            <div class="metric">
                                <span>${file}.webp:</span>
                                <span class="good">${(size/1024).toFixed(1)}KB</span>
                            </div>
                        `;
                    }
                } catch (e) {}
            }
            
            webpResults.innerHTML += `
                <div class="metric">
                    <span>WebP Images Available:</span>
                    <span class="${webpCount >= 6 ? 'good' : 'warning'}">${webpCount}/8</span>
                </div>
            `;
            
            // Check lazy loading
            const lazyImages = document.querySelectorAll('img[data-lazy-src]');
            const totalImages = document.querySelectorAll('img').length;
            const lazyResults = document.getElementById('lazyResults');
            
            lazyResults.innerHTML = `
                <div class="metric">
                    <span>Images with Lazy Loading:</span>
                    <span class="${lazyImages.length > 10 ? 'good' : 'warning'}">${lazyImages.length}/${totalImages}</span>
                </div>
            `;
            
            // Check image sizes
            const imageResults = document.getElementById('imageResults');
            const criticalImages = [
                { name: 'ball.png', maxSize: 1000 },
                { name: 'swirl.png', maxSize: 500 },
                { name: 'ellipse.png', maxSize: 150 },
                { name: 'network.png', maxSize: 150 },
                { name: 'funding.png', maxSize: 150 },
                { name: 'wallet-bg.png', maxSize: 150 }
            ];
            
            for (const img of criticalImages) {
                try {
                    const response = await fetch(`img/${img.name}`, { method: 'HEAD' });
                    const size = parseInt(response.headers.get('content-length')) / 1024;
                    imageResults.innerHTML += `
                        <div class="metric">
                            <span>${img.name}:</span>
                            <span class="${size <= img.maxSize ? 'good' : 'bad'}">${size.toFixed(1)}KB (target: <${img.maxSize}KB)</span>
                        </div>
                    `;
                } catch (e) {}
            }
            
            // Network timing
            const networkResults = document.getElementById('networkResults');
            const perfData = performance.getEntriesByType('navigation')[0];
            
            if (perfData) {
                networkResults.innerHTML = `
                    <div class="metric">
                        <span>DOM Content Loaded:</span>
                        <span class="${perfData.domContentLoadedEventEnd < 2000 ? 'good' : 'warning'}">${perfData.domContentLoadedEventEnd.toFixed(0)}ms</span>
                    </div>
                    <div class="metric">
                        <span>Page Load Complete:</span>
                        <span class="${perfData.loadEventEnd < 4000 ? 'good' : 'warning'}">${perfData.loadEventEnd.toFixed(0)}ms</span>
                    </div>
                `;
            }
            
            // Check resource count
            const resources = performance.getEntriesByType('resource');
            const imageResources = resources.filter(r => r.name.includes('.png') || r.name.includes('.webp') || r.name.includes('.jpg'));
            
            networkResults.innerHTML += `
                <div class="metric">
                    <span>Total Resources Loaded:</span>
                    <span>${resources.length}</span>
                </div>
                <div class="metric">
                    <span>Image Resources:</span>
                    <span>${imageResources.length}</span>
                </div>
            `;
        }
        
        // Auto-run tests on load
        window.addEventListener('load', () => {
            setTimeout(runTests, 1000);
        });
    </script>
</body>
</html>